<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>RMarkdown with htmlwidgets</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link href="widgetframe_example_files/slidy-2/styles/slidy.css" rel="stylesheet" />
  <script src="widgetframe_example_files/slidy-2/scripts/slidy.js"></script>
  <script src="widgetframe_example_files/htmlwidgets-0.9/htmlwidgets.js"></script>
  <script src="widgetframe_example_files/jquery-1.12.4/jquery.min.js"></script>
  <link href="widgetframe_example_files/leaflet-0.7.7/leaflet.css" rel="stylesheet" />
  <script src="widgetframe_example_files/leaflet-0.7.7/leaflet.js"></script>
  <link href="widgetframe_example_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
  <link href="widgetframe_example_files/leaflet-label-0.2.2/leaflet.label.css" rel="stylesheet" />
  <script src="widgetframe_example_files/leaflet-label-0.2.2/leaflet.label.js"></script>
  <script src="widgetframe_example_files/Proj4Leaflet-0.7.2/proj4-compressed.js"></script>
  <script src="widgetframe_example_files/Proj4Leaflet-0.7.2/proj4leaflet.js"></script>
  <script src="widgetframe_example_files/leaflet-binding-1.1.0/leaflet.js"></script>
  <script src="widgetframe_example_files/blazy-1.8.2/blazy.min.js"></script>
  <script src="widgetframe_example_files/pymjs-1.3.2/pym.v1.js"></script>
  <script src="widgetframe_example_files/widgetframe-binding-0.3.0/widgetframe.js"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">RMarkdown with htmlwidgets</h1>
  <p class="author">

  </p>
</div>
<div id="safely-including-htmlwidgets-in-rmarkdown" class="slide section level2">
<h1>Safely including htmlwidgets in RMarkdown</h1>
<p>Thereâ€™s a lot going on with a hmtlwidget inside of an RMarkdown document - there can be conflicting CSS/JavaScript that causes issues. For instance, in the map below clicking either zoom button will change the slide:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;leaflet&quot;</span>)
<span class="kw">leaflet</span>() %&gt;%
<span class="st">  </span><span class="kw">addTiles</span>()</code></pre></div>
<div id="htmlwidget-1d27d15af12de699d3f8" style="width:768px;height:576px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1d27d15af12de699d3f8">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]}]},"evals":[],"jsHooks":[]}</script>
<p>To protext against this, use the <code>widgetframe</code> library to effectively embed htmlwidgets as independent, responsive iframes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;widgetframe&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;leaflet&quot;</span>)
lf &lt;-<span class="st"> </span><span class="kw">leaflet</span>() %&gt;%
<span class="st">  </span><span class="kw">addTiles</span>()
<span class="kw">frameWidget</span>(lf)</code></pre></div>
<div id="htmlwidget-17befb2c1ee7cda1d9c0" style="width:100%;height:576px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-17befb2c1ee7cda1d9c0">{"x":{"url":"widgetframe_example_files/figure-slidy//widgets/widget_widgetframe_demo_eval.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="choropleth-with-leaflet" class="slide section level2">
<h1>Choropleth with Leaflet</h1>
<p>This slide contains a choropleth created using the <code>leaflet</code> library.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">contiguous_states &lt;-<span class="st"> </span>shp_all_us_states %&gt;%
<span class="st">  </span><span class="kw">filter</span>(contiguous.united.states ==<span class="st"> </span><span class="ot">TRUE</span>)


palette_state_divisions &lt;-
<span class="st">  </span><span class="kw">colorFactor</span>(<span class="kw">brewer.pal</span>(<span class="dv">9</span>, <span class="st">&quot;Set3&quot;</span>),
              contiguous_states$state.division)

lf_choropleth &lt;-<span class="st"> </span>contiguous_states %&gt;%
<span class="st">  </span><span class="kw">leaflet</span>() %&gt;%
<span class="st">  </span><span class="kw">addPolygons</span>(
    <span class="dt">fillColor =</span> ~<span class="kw">palette_state_divisions</span>(state.division),
    <span class="dt">color =</span> <span class="st">&quot;#000000&quot;</span>,
    <span class="dt">fillOpacity =</span> <span class="dv">1</span>,
    <span class="dt">weight =</span> <span class="dv">1</span>,
    <span class="dt">label =</span> ~state.name
  ) %&gt;%
<span class="st">  </span><span class="kw">addLegend</span>(<span class="dt">pal =</span> palette_state_divisions,
            <span class="dt">values =</span> ~state.division,
            <span class="dt">opacity =</span> <span class="dv">1</span>) %&gt;%
<span class="st">  </span><span class="kw">setMapWidgetStyle</span>(<span class="dt">style =</span> <span class="kw">list</span>(<span class="dt">background =</span> <span class="st">&quot;#aacbff&quot;</span>))
<span class="kw">frameWidget</span>(lf_choropleth)</code></pre></div>
<div id="htmlwidget-f94975a8ee539ee28d08" style="width:100%;height:576px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-f94975a8ee539ee28d08">{"x":{"url":"widgetframe_example_files/figure-slidy//widgets/widget_leaflet_choropleth.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="got-network" class="slide section level2">
<h1>GoT Network</h1>
<p>This is an interactive network built using the visNetwork library</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">got_nodes &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/GoT_nodes.csv&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">group =</span> superculture)
got_edges &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/GoT_edges.csv&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">from =</span> source,
         <span class="dt">to =</span> target)
got_network &lt;-<span class="st"> </span><span class="kw">visNetwork</span>(got_nodes, got_edges) %&gt;%
<span class="st">  </span><span class="kw">visIgraphLayout</span>() %&gt;%
<span class="st">  </span><span class="kw">visLegend</span>() %&gt;%
<span class="st">  </span><span class="kw">visOptions</span>(<span class="dt">highlightNearest =</span> <span class="ot">TRUE</span>)
<span class="kw">frameWidget</span>(got_network)</code></pre></div>
<div id="htmlwidget-239f133af3d6d2df575a" style="width:100%;height:576px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-239f133af3d6d2df575a">{"x":{"url":"widgetframe_example_files/figure-slidy//widgets/widget_got_network.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="gapminder-charts" class="slide section level2">
<h1>Gapminder Charts</h1>
<p>This is an interactive chart built using RMarkdown</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hc_style_gapminder &lt;-<span class="st"> </span>function(hc) {
  hc %&gt;%
<span class="st">    </span><span class="kw">hc_colors</span>(<span class="dt">colors =</span> <span class="kw">brewer.pal</span>(<span class="dv">5</span>, <span class="st">&quot;Dark2&quot;</span>)) %&gt;%
<span class="st">    </span><span class="kw">hc_xAxis</span>(<span class="dt">title =</span> <span class="st">&quot;Year&quot;</span>) %&gt;%
<span class="st">    </span><span class="kw">hc_yAxis</span>(<span class="dt">title =</span> <span class="st">&quot;&quot;</span>,
             <span class="dt">labels =</span> <span class="kw">list</span>(<span class="dt">formatter =</span> <span class="kw">JS</span>(<span class="st">&quot;function() {</span>
<span class="st">          return this.value / 1000000000 + &#39;B&#39;;</span>
<span class="st">        }&quot;</span>))) %&gt;%
<span class="st">    </span><span class="kw">hc_tooltip</span>(
      <span class="dt">shared =</span> <span class="ot">TRUE</span>,
      <span class="dt">valueDecimals =</span> <span class="dv">0</span>
      )
}

gapminder_chart &lt;-<span class="st"> </span>gapminder %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(year, continent) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">total.pop =</span> <span class="kw">sum</span>(<span class="kw">as.numeric</span>(pop))) %&gt;%
<span class="st">  </span><span class="kw">hchart</span>(
    <span class="dt">type =</span> <span class="st">&quot;line&quot;</span>,
    <span class="kw">hcaes</span>(
      <span class="dt">x =</span> year,
      <span class="dt">y =</span> total.pop,
      <span class="dt">group =</span> continent
    )
  ) %&gt;%
<span class="st">  </span><span class="kw">hc_title</span>(<span class="dt">text =</span> <span class="st">&quot;Continental populations from 1952 - 2007&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">hc_style_gapminder</span>() %&gt;%
<span class="st">  </span><span class="kw">hc_yAxis</span>(<span class="dt">labels =</span> <span class="kw">list</span>(<span class="dt">formatter =</span> <span class="kw">JS</span>(<span class="st">&quot;function() {</span>
<span class="st">          return this.value / 1000000000 + &#39;B&#39;;</span>
<span class="st">        }&quot;</span>)))
<span class="kw">frameWidget</span>(gapminder_chart)</code></pre></div>
<div id="htmlwidget-8d2b547d84e04d225dff" style="width:100%;height:576px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-8d2b547d84e04d225dff">{"x":{"url":"widgetframe_example_files/figure-slidy//widgets/widget_unnamed-chunk-1.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
</div>

  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

</body>
</html>
